!function(){angular.module("app").controller("angularTool.timeController",["$scope",function(e){var o=e;o.logTime=function(){console.log(o.data)},console.log("时间控件"),o.data={time:"2016-12-09 17:11:00"}}])}(),function(){angular.module("app").controller("angularTool.cropperController",["$scope",function(e){var o=e;console.log("裁剪"),o.imageConfig={bgSrc:"http://yueqingfang.cn/markdown/php/exportImg.php?imgpath=2017_12_24_17_02_38_0.jpg",fgSrc:"http://yueqingfang.cn/markdown/php/exportImg.php?imgpath=2017_12_24_17_02_38_0.jpg",isFg:!0}}])}(),function(){angular.module("app").controller("angularTool.dragController",["$scope","Core",function(e,o){var n=e;console.log("拖拽"),n.onClickLog=function(){console.log(n.data)},n.onClickMoveUp=function(){o.$uibModal.open({animation:!0,windowClass:"dialogMoveUp",controller:"angularTool.dialog.moveUp",templateUrl:"./WEB/app/angularTool/dialog/dialog.moveUp.html",resolve:{}}).result.then(function(e){console.log("你点击了确定")},function(e){console.log("你点击了取消")})},n.onClickMoveLeft=function(){o.$uibModal.open({animation:!0,windowClass:"dialogMoveLeft",controller:"angularTool.dialog.moveLeft",templateUrl:"./WEB/app/angularTool/dialog/dialog.moveLeft.html",resolve:{}}).result.then(function(e){console.log("你点击了确定")},function(e){console.log("你点击了取消")})},n.data=["red","yellow","green","blue","pink","skyblue","orange","#123456","#d23456","#e457fd","#f457fd","#7457fd","#af57fd","#945744","#f45733","#f45711","#7557fd","#a447fd","#933744","#f22a33","#f11711"]}])}(),function(){angular.module("app").controller("angularTool.modalController",["$scope","Core",function(e,o){var n=e;console.log("模态框"),n.title="模态框",n.onClickModal=function(){o.$uibModal.open({animation:!0,windowClass:"dialogDefault",controller:"angularTool.dialog.default",templateUrl:"./WEB/app/angularTool/dialog/dialog.default.html",resolve:{scope:function(){return n}}}).result.then(function(e){console.log("确定"),console.log("data:",e)},function(e){console.log("取消"),console.log("data:",e)})},n.onClickConfirm=function(){o.$uibModal.open({animation:!0,windowClass:"dialogConfirm",controller:"dialog.confirm",templateUrl:"./WEB/dialog/dialog.confirm.html",resolve:{scope:function(){return n},params:function(){return{body:"你要点击确定吗？"}}}}).result.then(function(e){alert("你点击了确定")},function(e){alert("你点击了取消")})},n.onClickConfirm2=function(){var e={header:"",body:"你要点击确认框吗？",ok:function(){alert("你点击了确认框222")},cancel:function(){alert("你取消了确认框2222")}};o.Util.confirm(o,e)}}])}(),function(){angular.module("app").controller("angularTool.notificationController",["$scope","Core","Notification",function(e,o,n){var l=e;l.info=function(){o.Notify.info("提示")},l.error=function(){o.Notify.error("error")},l.success=function(){o.Notify.success("success")},o.Notify.info("提示"),o.Notify.error("error"),o.Notify.success("success")}])}(),function(){angular.module("app").controller("angularTool.tinymceController",["$scope","$timeout","Core",function(e,o,n){var l=e;console.log("富文本编辑器"),l.tinymceOptions={onChange:function(e){console.log(e),console.log("为什么没有触发这个")},paste_preprocess:function(e,o){function n(e,o){for(var l=0,t=e.length;l<t;l++)if("META"!=e[l].tagName)if(3==e[l].nodeType)e[l].nodeValue.replace(/[\s|\r\n]+/g,"").length>0&&(o[o.length-1]+=e[l].nodeValue);else{if("IMG"==e[l].tagName){o.push(""),o[o.length-1]="<img class = 'insertimg' src = "+e[l].src+" >",o.push("");continue}if("TABLE"==e[l].tagName){o.push(""),i.enableTable?n(e[l].childNodes,o):o[o.length-1]=e[l].outerHTML,o.push("");continue}if("UL"==e[l].tagName||"OL"==e[l].tagName||"DL"==e[l].tagName){o.push(""),i.enableList?n(e[l].childNodes,o):o[o.length-1]=e[l].outerHTML,o.push("");continue}if(1==e[l].nodeType)if(-1!=c.indexOf(e[l].tagName))(a=e[l].childNodes).length&&a.length>0&&n(a,o);else if(-1!=s.indexOf(e[l].tagName))(a=e[l].childNodes).length&&a.length>0&&(o.push(""),n(a,o),o.push(""));else if(-1!=r.indexOf(e[l].tagName)){var a;(a=e[l].childNodes).length&&a.length>0&&(o.push(""),n(a,o),o.push(""))}}}var l=/<(\w+)[^>]*>([^<]*<\/\1>)/gim;l.compile(l);var t,a,i={enableTable:!0,enableList:!0},r=["TH","TR","TD","TBODY","THEAD","TFOOT","LI","DT","DD"],c=["A","ADDR","ACRONYM","B","BDO","BIG","CITE","CODE","DFN","EM","FONT","I","INPUT","KDB","Q","S","SMALL","SPAN","STRIKE","SUB","SUP","TEXTAREA","STRONG"],s=["P","DIV","SECTION","BLOCKQUOTE","CENTER","DIR","H1","H2","H3","H4","H5","H6"];try{a=document.createElement("div"),l.lastIndex=0,a.innerHTML=o.content.replace(l,"<$1>$2"),t=a.childNodes}catch(e){return void(t=o.content)}var u=[""];n(t,u);for(var g=0;g<u.length;g++)""!=u[g]&&(/insertimg/.test(u[g]),u[g]="<p>"+u[g]+"</p>");o.content=u.join("")},setup:function(e){e.on("keyDown",function(o){if(!(13!=o.keyCode&&10!=o.keyCode||1!=o.ctrlKey&&1!=o.altKey))for(var n=(i=e.dom).getParents(e.selection.getNode()),l=0;l<n.length;l++)if(r=n[l],console.log(r.nodeName),console.log(r.getAttribute("class")),"DIV"==r.nodeName&&r.getAttribute("class").includes("eachItem")){var t=i.uniqueId();$('<p id="'+t+'">&nbsp;</p>').insertAfter(r);var a=i.select("p#"+t)[0];e.selection.setCursorLocation(a),o.preventDefault();break}if(46==o.keyCode&&(1==o.ctrlKey||1==o.altKey)){var i,r;for(n=(i=e.dom).getParents(e.selection.getNode()),l=0;l<n.length;l++)if(r=n[l],console.log(r.nodeName),console.log(r.getAttribute("class")),"DIV"==r.nodeName&&r.getAttribute("class").includes("eachItem")){r.remove(),o.preventDefault();break}}}),e.on("init",function(){}),e.on("change",function(e){}),e.on("click",function(){})},inline:!1,toolbar1:"removeformat | bold italic underline strikethrough | alignleft aligncenter alignright alignjustify | styleselect formatselect fontselect fontsizeselect",toolbar2:"undo redo | cut copy paste | searchreplace | bullist numlist | outdent indent blockquote | link unlink anchor code | insertdatetime preview | forecolor backcolor | table",toolbar3:"previewInfo | recommendList | imageupload | smallImageupload | video | transform | imageWidth",theme:"modern",plugins:["advlist autolink autosave link image lists charmap print preview hr anchor pagebreak spellchecker","searchreplace wordcount visualblocks visualchars code fullscreen insertdatetime media nonbreaking","table contextmenu directionality emoticons template textcolor paste  textcolor colorpicker textpattern imagetools"],content_css:["./lib/tinymce/widgetSkins/fire.css"],skin:"lightgray",menubar:!1,height:400,external_plugins:{previewInfo:"../../../lib/tinymce/widgetPlugins/previewInfo/plugin.js",recommendList:"../../../lib/tinymce/widgetPlugins/addGoods2/plugin2.js",imageupload:"../../../lib/tinymce/widgetPlugins/imageupload/plugin.min.js",smallImageupload:"../../../lib/tinymce/widgetPlugins/smallImageupload/plugin.min.js",video:"../../../lib/tinymce/widgetPlugins/video/plugin.js",transform:"../../../lib/tinymce/widgetPlugins/transform/plugin.js",imageWidth:"../../../lib/tinymce/widgetPlugins/imageWidth/plugin.js"},recommendList:{showLoad:!0,getitemdetailCallback:function(e,n){if(e.data.ids){var l=e.data.ids.split(",");console.log(l,"测试中");for(var t=0,a=l.length;t<a;t++)if(!/^\d*$/.test(l[t]))return n.reject("商品格式不对");o(function(){var o=[{aPropertyName:"容量/サイズ：",bPropertyName:"",brandId:2178501,brandName:"イプサ / IPSA",curPriceCny:"303",currencyName:"日元",currencySymbol:"円",image:"http://img.zhefengle.com/c3138c896953e5679cc6b024f4fdf5c9.jpg",itemId:18190316,itemPrice:4536,itemTitle:"眉彩第1名 带鼻侧影 IPSA五色眉粉盘  3.3g",labelList:[],oriPriceCny:"303",shareId:3036400,shopId:7301,shopName:"Cosme日本官网",skus:[{aVal:"3.3g",bVal:"无需设置",price:303,skuId:126682485,stock:9}],title:"眉彩第1名 带鼻侧影 IPSA五色眉粉盘  3.3g"}];if(e.data=o,0==o.length)return n.reject("没有该商品");n.next()},3e3)}},info:function(e){n.Notify.info(e)}},language:"zh_CN"},e.tinymceModel="niceMCE"}])}(),function(){angular.module("app").controller("angularTool.uploadController",["$scope","Core",function(e,o){var n=e;console.log("上传"),n.upload=function(e){console.log(e),angular.forEach(e,function(e,o){n.data.img.push(e),n.imgNames.push(e.name)})},n.onClickUpload=function(){n.loading=!0,n.data.img?o.Upload.upload({url:"http://yueqingfang.cn/markdown/php/imgUpload_batch.php",data:n.data}).progress(function(e){}).success(function(e,l,t,a){console.log(e),"success"==e.code?(o.Notify.success(e.message),angular.extend(n.returnImgs,e.model),n.data={img:[]},n.imgNames=[]):o.Notify.error(e.message),n.loading=!1}).error(function(e,o,l,t){console.log("error"),console.log(e),n.loading=!1}):o.Notify.info("请选择图片")},n.data={img:[]},n.imgNames=[],n.returnImgs=[]}])}(),function(){angular.module("app").controller("angularTool.dialog.default",["$scope","Core","$uibModalInstance","$timeout","scope",function(e,o,n,l,t){var a=e;a.onClickOk=function(){n.close("确认")},a.onClickCancel=function(){n.dismiss("取消")},console.log("测试"),console.log("测试2"),console.log(t),a.loading=!0,a.settime=l(function(){a.loading=!1,l.cancel(a.settime)},3e3)}])}(),function(){angular.module("app").controller("angularTool.dialog.moveLeft",["$scope","Core","$uibModalInstance",function(e,o,n){var l=e;l.onClickOk=function(){n.close("确认")},l.onClickCancel=function(){n.dismiss("取消")},l.data=["red","yellow","green","blue","pink","skyblue","orange","#123456","#d23456","#e457fd","#f457fd","#7457fd","#af57fd","#945744","#f45733","#f45711","#7557fd","#a447fd","#933744","#f22a33","#f11711"]}])}(),function(){angular.module("app").controller("angularTool.dialog.moveUp",["$scope","Core","$uibModalInstance",function(e,o,n){var l=e;l.onClickOk=function(){n.close("确认")},l.onClickCancel=function(){n.dismiss("取消")},l.data=["red","yellow","green","blue","pink","skyblue","orange","#123456","#d23456","#e457fd","#f457fd","#7457fd","#af57fd","#945744","#f45733","#f45711","#7557fd","#a447fd","#933744","#f22a33","#f11711"]}])}();